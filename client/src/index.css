/* --- 1. FONTS & VARIABLES --- */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');

:root {
  max-width: 100%;    /* On autorise toute la largeur */
  margin: 0;          /* On colle aux bords */
  padding: 0;         /* On enlève le padding */
  text-align: left;   /* On remet le texte normal */
  width: 100%;        /* On force la largeur totale */

  --bg-dark: #050b0a;
  --bg-gradient: radial-gradient(circle at 50% 0%, #1a2a25 0%, var(--bg-dark) 60%);
  --card-bg: rgba(255, 255, 255, 0.03);
  --card-border: rgba(255, 255, 255, 0.08);
  --nav-bg: rgba(10, 20, 18, 0.8);
  --primary: #00ff8c;
  --prepa-color: #ff0048;
  --prepa-bg: rgb(22, 0, 6);
  --journal-color: #00eeff;
  --journal-bg: rgb(0, 34, 50);
  --competition-color: #ffbb00;
  --competition-bg: rgb(50, 30, 0);
  --primary-glow: rgba(0, 255, 140, 0.4);
  --text-main: #ffffff;
  --text-muted: #888888;
  --blur: 20px;
}

/* --- 2. RESET & GLOBAL --- */
*, *::before, *::after { box-sizing: border-box; }

body {
  margin: 0;
  font-family: 'Montserrat', sans-serif;
  background: var(--bg-dark) var(--bg-gradient);
  color: var(--text-main);
  padding-bottom: 70px;
  min-height: 100vh;
}

/* --- 3. LAYOUT (Top Bar & Content) --- */
.top-bar {
  position: fixed;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 5px 5%;
  position: relative;
  z-index: 10;
}

.logo-box {
  height: 70px;
  margin-top: 20px;
  padding: 9px 9px 9px 0; /* On garde 0 à gauche pour bien coller */
  /* Safari préfère un flex ici pour bien gérer l'enfant */
  display: flex; 
  align-items: center;
}

.logo-box img, .logo-box svg {
  height: 100%;
  width: auto; /* <-- LE SECRET EST ICI : 'auto' au lieu de '100%' */
  max-width: 100%; /* Sécurité supplémentaire */
  object-fit: contain;
  display: block;
}

@media (max-width: 768px) {
  .logo-box {
    height: 50px;
    /* Sur mobile, pousser le logo vers la gauche */
    margin-right: auto;
    margin-left: 8px;
  }
}

/* --- 4. NAVIGATION (Mobile & Desktop) --- */
.bottom-nav {
  position: fixed;
  left: 50%; transform: translateX(-50%);
  background: var(--nav-bg);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  border: 1px solid var(--card-border);
  display: flex; align-items: center;
  z-index: 1000;
  transition: all 0.3s ease;
  justify-content: center; /* Centre les éléments dans la barre */
  gap: 15px;               /* Espace constant entre les boutons */
  padding: 10px 20px;
  height: 70px;
}

/* Base Nav Item (Common) */
.nav-item {
  display: flex;
  align-items: center;
  justify-content: center;
  
  /* Dimensions de base */
  width: 50px; 
  height: 50px;
  border-radius: 50%;
  
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  flex-shrink: 0; /* Empêche l'icône de s'écraser */
  text-decoration: none;
}

.nav-icon, .trophy-icon, .nav-item svg {
  width: 24px; height: 24px;
  stroke: var(--text-muted);
  fill: none; stroke-width: 1.5;
  transition: all 0.3s ease;
}

.prepa-icon { stroke: var(--prepa-color); }
.journal-icon { stroke: var(--journal-color); }

/* Active State (The Neon Look) */
.nav-item.active {
  border-radius: 25px;      /* Forme pilule */
  background: var(--primary);
  box-shadow: 0 0 20px var(--primary);
}

.nav-item.active svg {
  stroke: #000000 !important;
  opacity: 1 !important;
}

/* Tablet & Mobile specifics */
@media (max-width: 768px) {
  .bottom-nav {
    bottom: 20px;
    padding: 15px;
    border-radius: 9999px;
    width: auto; gap: 15px;
  }
  .nav-item { width: 50px; height: 50px; }
  .nav-item span { display: none; }
  .nav-item.active { width: 85px;}
}

/* Desktop Sidebar specifics */
@media (min-width: 769px) {
  .bottom-nav {
    left: 20px; top: 50%; transform: translateY(-50%);
    bottom: auto; width: 75px; height: auto;
    flex-direction: column; padding: 25px 0;
    border-radius: 50px; gap: 25px;
  }
}

/* --- 5. COMPOSANTS (Cards, Inputs, Buttons) --- */
.card {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 20px;
  padding: 25px;
  backdrop-filter: blur(10px);
}

.btn-primary, button[type="submit"] {
  background: var(--primary);
  color: black; border: none;
  padding: 15px 25px;
  border-radius: 9999px;
  font-family: 'Montserrat', sans-serif;
  font-weight: 800;
  text-transform: uppercase;
  cursor: pointer; transition: 0.2s;
}

.btn-primary:active { transform: scale(0.96); }

input, select, textarea {
  width: 100%;
  border-radius: 9999px;
  padding: 12px 25px;
  background: rgba(255, 255, 255, 0.05);
  color: white; border: 1px solid rgba(255, 255, 255, 0.1);
  outline: none; transition: 0.3s;
}

input:focus { border-color: var(--text-muted) }

textarea { border-radius: 20px; min-height: 100px; resize: vertical; }

/* Icon Inputs Profile */
.profile-input-container { position: relative; }
.profile-input-container input { padding-left: 55px !important; }
.profile-input-container svg {
  position: absolute; left: 20px; top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted); pointer-events: none;
}

/* --- WIDGET FEEDBACK (Responsive) --- */

/* 1. Sur Mobile : Centré en bas par défaut */
.feedback-wrapper {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9999;
  display: flex;
  flex-direction: column;
  align-items: center; /* Centre le bouton et la fenêtre */
  backdrop-filter: var(--bg-dark) blur(var(--blur));
}

.feedback-window {
  position: absolute;
  bottom: 70px;
  width: 320px;
  left: 50%;
  margin-left: -160px; /* Centre la fenêtre de 320px de large */
}

/* 2. Sur Ordinateur (écrans > 768px) : En bas à droite */
@media (min-width: 768px) {
  .feedback-wrapper {
    left: auto;
    right: 30px;
    bottom: 30px;
    transform: none;
    align-items: flex-end; /* Aligne le contenu sur la droite */
  }
  
  .feedback-window {
    left: auto;
    right: 0; /* Aligne la fenêtre avec le bord droit du bouton */
    margin-left: 0;
  }
}

/* --- 6. DROPDOWN & UTILS --- */
.dropdown-menu {
  position: fixed; top: 75px; right: 20px;
  background: rgba(10, 20, 18, 0.95);
  backdrop-filter: blur(20px);
  border: 1px solid var(--card-border);
  border-radius: 18px; padding: 8px;
  width: 220px; z-index: 2000;
  box-shadow: 0 15px 40px rgba(0,0,0,0.6);
}

.dropdown-item {
  display: flex; align-items: center; gap: 12px;
  padding: 12px; color: white; text-decoration: none;
  border-radius: 12px; transition: 0.2s;
}

.dropdown-item:hover { background: rgba(255, 255, 255, 0.05); color: var(--primary); }
.dropdown-item.danger { color: #ff4444; }

/* Stats */
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; }
.stat-card {
  background: #0f1a18; border-radius: 24px; padding: 20px;
  border: 1px solid rgba(255, 255, 255, 0.05); height: 140px;
}